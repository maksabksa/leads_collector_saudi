{
  "query": "\nCREATE TABLE `auto_reply_rules` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`triggerKeywords` json NOT NULL,\n\t`replyTemplate` text NOT NULL,\n\t`useAI` boolean NOT NULL DEFAULT false,\n\t`aiContext` text,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`matchCount` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `auto_reply_rules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `user_invitations` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`email` varchar(320) NOT NULL,\n\t`invitedBy` int NOT NULL,\n\t`token` varchar(128) NOT NULL,\n\t`role` enum('user','admin') NOT NULL DEFAULT 'user',\n\t`permissions` json,\n\t`status` enum('pending','accepted','expired','revoked') NOT NULL DEFAULT 'pending',\n\t`acceptedBy` int,\n\t`expiresAt` timestamp NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `user_invitations_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `user_invitations_token_unique` UNIQUE(`token`)\n);\n\nCREATE TABLE `user_permissions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`permissions` json NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `user_permissions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `user_permissions_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE `whatsapp_chat_messages` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`chatId` int NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`direction` enum('outgoing','incoming') NOT NULL,\n\t`message` text NOT NULL,\n\t`isAutoReply` boolean NOT NULL DEFAULT false,\n\t`status` enum('sent','delivered','read','failed') NOT NULL DEFAULT 'sent',\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `whatsapp_chat_messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `whatsapp_chats` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`phone` varchar(30) NOT NULL,\n\t`contactName` varchar(200),\n\t`leadId` int,\n\t`lastMessage` text,\n\t`lastMessageAt` timestamp,\n\t`unreadCount` int NOT NULL DEFAULT 0,\n\t`isArchived` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `whatsapp_chats_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `whatsapp_settings` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL,\n\t`accountLabel` varchar(100) NOT NULL,\n\t`messageDelay` int NOT NULL DEFAULT 10000,\n\t`notificationThreshold` int NOT NULL DEFAULT 50,\n\t`messagesSentToday` int NOT NULL DEFAULT 0,\n\t`totalMessagesSent` int NOT NULL DEFAULT 0,\n\t`autoReplyEnabled` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `whatsapp_settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `whatsapp_settings_accountId_unique` UNIQUE(`accountId`)\n);\n\nINSERT INTO `whatsapp_settings` (`accountId`, `accountLabel`, `messageDelay`, `notificationThreshold`) VALUES ('default', 'الحساب الرئيسي', 10000, 50);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway04.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 28NYsasnv8DUFoB.root --database 3NWXhYQbbwVSepwuoQMygc --execute \nCREATE TABLE `auto_reply_rules` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`triggerKeywords` json NOT NULL,\n\t`replyTemplate` text NOT NULL,\n\t`useAI` boolean NOT NULL DEFAULT false,\n\t`aiContext` text,\n\t`isActive` boolean NOT NULL DEFAULT true,\n\t`matchCount` int NOT NULL DEFAULT 0,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `auto_reply_rules_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `user_invitations` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`email` varchar(320) NOT NULL,\n\t`invitedBy` int NOT NULL,\n\t`token` varchar(128) NOT NULL,\n\t`role` enum('user','admin') NOT NULL DEFAULT 'user',\n\t`permissions` json,\n\t`status` enum('pending','accepted','expired','revoked') NOT NULL DEFAULT 'pending',\n\t`acceptedBy` int,\n\t`expiresAt` timestamp NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `user_invitations_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `user_invitations_token_unique` UNIQUE(`token`)\n);\n\nCREATE TABLE `user_permissions` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`userId` int NOT NULL,\n\t`permissions` json NOT NULL,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `user_permissions_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `user_permissions_userId_unique` UNIQUE(`userId`)\n);\n\nCREATE TABLE `whatsapp_chat_messages` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`chatId` int NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`direction` enum('outgoing','incoming') NOT NULL,\n\t`message` text NOT NULL,\n\t`isAutoReply` boolean NOT NULL DEFAULT false,\n\t`status` enum('sent','delivered','read','failed') NOT NULL DEFAULT 'sent',\n\t`sentAt` timestamp NOT NULL DEFAULT (now()),\n\tCONSTRAINT `whatsapp_chat_messages_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `whatsapp_chats` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL DEFAULT 'default',\n\t`phone` varchar(30) NOT NULL,\n\t`contactName` varchar(200),\n\t`leadId` int,\n\t`lastMessage` text,\n\t`lastMessageAt` timestamp,\n\t`unreadCount` int NOT NULL DEFAULT 0,\n\t`isArchived` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `whatsapp_chats_id` PRIMARY KEY(`id`)\n);\n\nCREATE TABLE `whatsapp_settings` (\n\t`id` int AUTO_INCREMENT NOT NULL,\n\t`accountId` varchar(64) NOT NULL,\n\t`accountLabel` varchar(100) NOT NULL,\n\t`messageDelay` int NOT NULL DEFAULT 10000,\n\t`notificationThreshold` int NOT NULL DEFAULT 50,\n\t`messagesSentToday` int NOT NULL DEFAULT 0,\n\t`totalMessagesSent` int NOT NULL DEFAULT 0,\n\t`autoReplyEnabled` boolean NOT NULL DEFAULT false,\n\t`createdAt` timestamp NOT NULL DEFAULT (now()),\n\t`updatedAt` timestamp NOT NULL DEFAULT (now()) ON UPDATE CURRENT_TIMESTAMP,\n\tCONSTRAINT `whatsapp_settings_id` PRIMARY KEY(`id`),\n\tCONSTRAINT `whatsapp_settings_accountId_unique` UNIQUE(`accountId`)\n);\n\nINSERT INTO `whatsapp_settings` (`accountId`, `accountLabel`, `messageDelay`, `notificationThreshold`) VALUES ('default', 'الحساب الرئيسي', 10000, 50);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 3395
}